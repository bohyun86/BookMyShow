<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.itwillbs.mapper.MemberMapper">

 
<!--     <resultMap id="userResultMap" type="com.itwillbs.domain.UserDTO"> -->
<!--         <id property="userId" column="user_id"/> -->
<!--         <result property="userName" column="user_name"/> -->
<!--         <result property="password" column="password"/> -->
<!--         <result property="email" column="email"/> -->
<!--         <result property="phoneNumber" column="phone_number"/> -->
<!--         <result property="name" column="name"/> -->
<!--         <result property="userRole" column="user_role"/> -->
<!--         <result property="createdAt" column="created_at"/> -->
<!--         <result property="updatedAt" column="updated_at"/> -->
<!--     </resultMap> -->

    <select id="getMember" resultType="com.itwillbs.domain.UserDTOAdmin" >
        SELECT M.*,U.*
        FROM Member M
        JOIN User U ON M.user_id = U.user_id
        WHERE U.user_name = #{user_name} or U.name =#{name} or U.email =#{email}
        
<!--             SELECT M.*,U.*,B.* -->
<!--         FROM Member M -->
<!--         JOIN User U ON M.user_id = U.user_id -->
<!--         Join Booking B ON M.member_id = B.member_id -->
<!--         WHERE U.user_name = #{id} or U.name =#{name} or U.email =#{email} -->
    </select>
    
    
        <select id="memberBooked" resultType="com.itwillbs.domain.UserDTOAdmin" >
   SELECT M.*, U.*, B.*, BS.*, MS.*, V.*,R.*
    FROM `Member` AS M
    JOIN `User` AS U ON M.user_id = U.user_id
    JOIN `Booking` AS B ON M.member_id = B.member_id
    JOIN `BookedSeats` AS BS ON B.booking_id = BS.booking_id
    JOIN `Musical` AS MS ON B.musical_id = MS.musical_id
    JOIN `Venue` AS V ON MS.venue_id = V.venue_id
    JOIN `Review` AS R ON MS.musical_id = R.musical_id
    WHERE U.user_id = #{user_id}

    </select>
    
    
    
    

</mapper>